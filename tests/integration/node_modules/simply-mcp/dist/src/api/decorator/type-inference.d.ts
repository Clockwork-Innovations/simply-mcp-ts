/**
 * TypeScript Type Inference and Schema Generation
 *
 * This module extracts method signatures and parameter types from TypeScript
 * source files using the TypeScript Compiler API. This enables automatic type
 * inference for decorator-based MCP servers even when using tsx (which strips
 * types at runtime).
 *
 * It also provides Zod schema generation based on TypeScript types and JSDoc.
 */
import { z } from 'zod';
import type { ParameterInfo, JSDocInfo } from './types.js';
/**
 * Method parameter information extracted from TypeScript AST
 */
export interface MethodParameter {
    /** Parameter name */
    name: string;
    /** Runtime constructor: String, Number, Boolean, Array, Object, Date */
    type: any;
    /** Whether the parameter is optional */
    optional: boolean;
    /** Whether the parameter has a default value */
    hasDefault: boolean;
    /** The default value (if hasDefault is true) */
    defaultValue?: any;
}
/**
 * Method signature extracted from TypeScript AST
 */
export interface MethodSignature {
    /** Method name */
    methodName: string;
    /** Array of parameter information */
    parameters: MethodParameter[];
}
/**
 * Parsed class information from TypeScript AST
 */
export interface ParsedClass {
    /** Class name */
    className: string;
    /** Map of method name to method signature */
    methods: Map<string, MethodSignature>;
}
/**
 * Parse a TypeScript source file and extract class method signatures
 *
 * Uses the TypeScript Compiler API to parse a source file and extract
 * detailed information about class methods and their parameters.
 *
 * @param filePath - Path to the TypeScript source file
 * @returns Parsed class information or null if no class found
 *
 * @example
 * ```typescript
 * import { parseTypeScriptFile } from 'simply-mcp';
 *
 * const parsed = parseTypeScriptFile('./my-server.ts');
 * if (parsed) {
 *   console.log(parsed.className); // "MyServer"
 *   console.log(parsed.methods.size); // 3
 *
 *   const greetMethod = parsed.methods.get('greet');
 *   console.log(greetMethod?.parameters[0].name); // "name"
 *   console.log(greetMethod?.parameters[0].type); // String
 * }
 * ```
 */
export declare function parseTypeScriptFile(filePath: string): ParsedClass | null;
/**
 * Parse a TypeScript file with caching
 *
 * Same as parseTypeScriptFile but caches results to avoid re-parsing
 * the same file multiple times.
 *
 * @param filePath - Path to the TypeScript source file
 * @returns Parsed class information or null if no class found
 *
 * @example
 * ```typescript
 * import { parseTypeScriptFileWithCache } from 'simply-mcp';
 *
 * // First call parses the file
 * const parsed1 = parseTypeScriptFileWithCache('./my-server.ts');
 *
 * // Second call returns cached result
 * const parsed2 = parseTypeScriptFileWithCache('./my-server.ts');
 *
 * console.log(parsed1 === parsed2); // true (same object reference)
 * ```
 */
export declare function parseTypeScriptFileWithCache(filePath: string): ParsedClass | null;
/**
 * Get method parameter types from parsed class
 *
 * Helper function to extract parameter information for a specific method
 * from a parsed class.
 *
 * @param parsedClass - Parsed class information
 * @param methodName - Name of the method
 * @returns Array of method parameters or empty array if method not found
 *
 * @example
 * ```typescript
 * import { parseTypeScriptFileWithCache, getMethodParameterTypes } from 'simply-mcp';
 *
 * const parsed = parseTypeScriptFileWithCache('./my-server.ts');
 * const params = getMethodParameterTypes(parsed, 'greet');
 *
 * console.log(params[0].name); // "name"
 * console.log(params[0].type); // String
 * console.log(params[0].optional); // false
 * ```
 */
export declare function getMethodParameterTypes(parsedClass: ParsedClass | null, methodName: string): MethodParameter[];
/**
 * Convert TypeScript parameter to Zod schema with JSDoc descriptions
 *
 * Generates a Zod object schema from TypeScript parameter types and JSDoc
 * information. Supports optional parameters, defaults, and type inference.
 *
 * @param paramTypes - Runtime parameter types from reflect-metadata
 * @param methodName - Name of the method (for debugging)
 * @param paramInfo - Parameter information with names, optionality, and defaults
 * @param jsdoc - Optional JSDoc information with parameter descriptions
 * @returns Zod object schema for the parameters
 *
 * @example
 * ```typescript
 * import { inferZodSchema } from 'simply-mcp';
 *
 * // Function with JSDoc
 * /**
 *  * Greet a user
 *  * @param name User's name
 *  * @param formal Use formal greeting
 *  *\/
 * function greet(name: string, formal: boolean = false) {
 *   return formal ? `Good day, ${name}` : `Hi, ${name}!`;
 * }
 *
 * const paramInfo = [
 *   { name: 'name', optional: false, hasDefault: false, type: String },
 *   { name: 'formal', optional: true, hasDefault: true, defaultValue: false, type: Boolean }
 * ];
 *
 * const jsdoc = {
 *   description: 'Greet a user',
 *   params: new Map([
 *     ['name', "User's name"],
 *     ['formal', 'Use formal greeting']
 *   ])
 * };
 *
 * const schema = inferZodSchema([String, Boolean], 'greet', paramInfo, jsdoc);
 *
 * // Validate input
 * schema.parse({ name: 'Alice', formal: true }); // OK
 * schema.parse({ name: 'Bob' }); // OK (formal defaults to false)
 * ```
 */
export declare function inferZodSchema(paramTypes: any[], methodName: string, paramInfo: ParameterInfo[] | string[], jsdoc?: JSDocInfo): z.ZodObject<any>;
/**
 * Extract parameter names from function (legacy support)
 *
 * Simple helper that returns just the parameter names from a function.
 * This is a legacy function maintained for backward compatibility.
 *
 * @param fn - Function to extract parameter names from
 * @returns Array of parameter names
 *
 * @example
 * ```typescript
 * import { getParameterNames } from 'simply-mcp';
 *
 * function greet(name: string, formal?: boolean) {
 *   return formal ? `Good day, ${name}` : `Hi, ${name}!`;
 * }
 *
 * const names = getParameterNames(greet);
 * console.log(names); // ['name', 'formal']
 * ```
 */
export declare function getParameterNames(fn: Function): string[];
//# sourceMappingURL=type-inference.d.ts.map