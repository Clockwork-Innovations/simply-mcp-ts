/**
 * SimplyMCP - A simplified single-file MCP server framework
 * Inspired by FastMCP but built on the existing MCP infrastructure
 *
 * @deprecated Use `BuildMCPServer` instead (renamed in v2.5.0+)
 * This class will be removed in v3.0.0.
 *
 * @example
 * ```typescript
 * // NEW: Use BuildMCPServer (recommended)
 * import { BuildMCPServer } from 'simply-mcp';
 * import { z } from 'zod';
 *
 * const server = new BuildMCPServer({
 *   name: 'my-server',
 *   version: '1.0.0'
 * });
 *
 * server.addTool({
 *   name: 'greet',
 *   description: 'Greet a user',
 *   parameters: z.object({
 *     name: z.string(),
 *   }),
 *   execute: async (args) => {
 *     return `Hello, ${args.name}!`;
 *   },
 * });
 *
 * await server.start();
 * ```
 *
 * @example
 * ```typescript
 * // OLD: SimplyMCP (deprecated, still works)
 * import { SimplyMCP } from 'simply-mcp';
 * const server = new SimplyMCP({ name: 'my-server', version: '1.0.0' });
 * ```
 */
import { ZodSchema } from 'zod';
import { HandlerContext, HandlerResult } from './core/types.js';
import { ParsedDependencies } from './core/index.js';
import { InstallOptions, InstallResult, DependencyStatus } from './core/installation-types.js';
import { ImageInput, BinaryInput, AudioInput } from './core/content-helpers.js';
export type ExecuteFunction<T = any> = (args: T, context?: HandlerContext) => Promise<string | HandlerResult | ImageInput | BinaryInput | AudioInput> | string | HandlerResult | ImageInput | BinaryInput | AudioInput;
export interface ToolDefinition<T = any> {
    name: string;
    description: string;
    parameters: ZodSchema<T>;
    execute: ExecuteFunction<T>;
}
export interface PromptDefinition {
    name: string;
    description: string;
    arguments?: Array<{
        name: string;
        description: string;
        required: boolean;
    }>;
    template: string;
}
export interface ResourceDefinition {
    uri: string;
    name: string;
    description: string;
    mimeType: string;
    content: string | {
        [key: string]: any;
    } | Buffer | Uint8Array;
}
/**
 * SimplyMCP Server Options
 * Consolidated configuration for creating an MCP server
 */
export interface SimplyMCPOptions {
    name: string;
    version: string;
    description?: string;
    basePath?: string;
    defaultTimeout?: number;
    transport?: {
        type?: 'stdio' | 'http';
        port?: number;
        stateful?: boolean;
    };
    capabilities?: {
        sampling?: boolean;
        logging?: boolean;
    };
    dependencies?: ParsedDependencies;
    autoInstall?: boolean | InstallOptions;
}
export type TransportType = 'stdio' | 'http';
/**
 * Start Options
 * Options for starting the MCP server
 * These override any transport configuration set in SimplyMCPOptions
 */
export interface StartOptions {
    transport?: TransportType;
    port?: number;
    stateful?: boolean;
}
/**
 * SimplyMCP Server - A simplified API for creating MCP servers
 */
export declare class SimplyMCP {
    private options;
    private tools;
    private prompts;
    private resources;
    private handlerManager;
    private server?;
    private httpServer?;
    private transports;
    private isRunning;
    private dependencies?;
    /**
     * Create a new SimplyMCP server
     */
    constructor(options: SimplyMCPOptions);
    /**
     * Get the server name (BUG-004 FIX)
     */
    get name(): string;
    /**
     * Get the server version (BUG-004 FIX)
     */
    get version(): string;
    /**
     * Get the server description (additional getter)
     */
    get description(): string | undefined;
    /**
     * Add a tool to the server
     * @param definition Tool definition with Zod schema and execute function
     * @returns this for chaining
     */
    addTool<T = any>(definition: ToolDefinition<T>): this;
    /**
     * Add a prompt to the server
     * @param definition Prompt definition
     * @returns this for chaining
     */
    addPrompt(definition: PromptDefinition): this;
    /**
     * Add a resource to the server
     * @param definition Resource definition
     * @returns this for chaining
     */
    addResource(definition: ResourceDefinition): this;
    /**
     * Start the server
     * @param options Start options (overrides configuration from constructor)
     */
    start(options?: StartOptions): Promise<void>;
    /**
     * Stop the server gracefully
     */
    stop(): Promise<void>;
    /**
     * Register tool handlers with the MCP server
     */
    private registerToolHandlers;
    /**
     * Register prompt handlers with the MCP server
     */
    private registerPromptHandlers;
    /**
     * Register resource handlers with the MCP server
     */
    private registerResourceHandlers;
    /**
     * Start the server with stdio transport
     */
    private startStdio;
    /**
     * Start the server with HTTP transport
     */
    private startHttp;
    /**
     * Render a template string with variables
     */
    private renderTemplate;
    /**
     * Normalize result to HandlerResult format
     * Handles text, binary content (Buffer/Uint8Array), and structured objects
     */
    private normalizeResult;
    /**
     * Get server info
     */
    getInfo(): {
        name: string;
        version: string;
        isRunning: boolean;
    };
    /**
     * Get statistics about registered items
     */
    getStats(): {
        tools: number;
        prompts: number;
        resources: number;
    };
    /**
     * Get inline dependencies
     * Returns parsed dependencies if available
     *
     * @returns Parsed dependencies or null if none declared
     *
     * @example
     * ```typescript
     * const deps = server.getDependencies();
     * if (deps) {
     *   console.log('Dependencies:', deps.map);
     * }
     * ```
     */
    getDependencies(): ParsedDependencies | null;
    /**
     * Check if a specific dependency is declared
     *
     * @param packageName - Package name to check
     * @returns True if dependency is declared
     *
     * @example
     * ```typescript
     * if (server.hasDependency('axios')) {
     *   console.log('Server uses axios');
     * }
     * ```
     */
    hasDependency(packageName: string): boolean;
    /**
     * Get version specifier for a specific package
     *
     * @param packageName - Package name to lookup
     * @returns Version specifier or undefined if not declared
     *
     * @example
     * ```typescript
     * const version = server.getDependencyVersion('axios');
     * console.log(`axios version: ${version}`);
     * ```
     */
    getDependencyVersion(packageName: string): string | undefined;
    /**
     * Install missing dependencies
     *
     * @param options - Installation options
     * @returns Installation result
     *
     * @example
     * ```typescript
     * const result = await server.installDependencies({
     *   packageManager: 'npm',
     *   timeout: 10 * 60 * 1000, // 10 minutes
     *   onProgress: (event) => {
     *     console.log(`${event.type}: ${event.message}`);
     *   }
     * });
     *
     * if (result.success) {
     *   console.log(`Installed: ${result.installed.join(', ')}`);
     * } else {
     *   console.error(`Errors: ${result.errors.length}`);
     * }
     * ```
     */
    installDependencies(options?: InstallOptions): Promise<InstallResult>;
    /**
     * Check dependency status (installed vs missing)
     *
     * @returns Dependency check result
     *
     * @example
     * ```typescript
     * const status = await server.checkDependencies();
     * console.log(`Missing: ${status.missing.join(', ')}`);
     * console.log(`Installed: ${status.installed.join(', ')}`);
     * ```
     */
    checkDependencies(): Promise<DependencyStatus>;
    /**
     * Create SimplyMCP server from file with inline dependencies
     * Parses the file content to extract inline dependency declarations
     *
     * @param filePath - Path to server file
     * @param options - Additional server options (will override parsed values)
     * @returns Promise resolving to SimplyMCP instance
     *
     * @example
     * ```typescript
     * // Without auto-install (default)
     * const server = await SimplyMCP.fromFile('./server.ts');
     *
     * // With auto-install
     * const server = await SimplyMCP.fromFile('./server.ts', {
     *   autoInstall: true
     * });
     *
     * // With custom install options
     * const server = await SimplyMCP.fromFile('./server.ts', {
     *   autoInstall: {
     *     packageManager: 'pnpm',
     *     onProgress: (event) => console.log(event.message)
     *   }
     * });
     * ```
     */
    static fromFile(filePath: string, options?: Partial<SimplyMCPOptions>): Promise<SimplyMCP>;
    /**
     * Request LLM sampling/completion from the client
     * @private
     */
    private requestSampling;
    /**
     * Send progress notification to the client
     * @private
     */
    private sendProgressNotification;
    /**
     * Send logging notification to the client
     * @private
     */
    private sendLoggingNotification;
    /**
     * Read a resource by URI (for use in handler context)
     * @private
     */
    private readResourceByUri;
}
//# sourceMappingURL=SimplyMCP.d.ts.map